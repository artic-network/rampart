# Setting up your own run

This will walk through how to set up your own run -- including describing the config files which RAMPART uses.
If you haven't already [installed rampart](installation) or [run an example dataset](examples) then please do that now.



## Run configuration

RAMPART is best run from with a directory created specifically for the particular run.

By default a sub-directory called `annotations` will be created in the runtime directory contain the data files generated by the processing pipeline.
These will be in the format of comma-seperated-value (CSV) files with one for each FASTQ file created by the basecaller (they will have the same filename as the FASTQ files but with the extension `.csv` instead of `.fastq`. 

The runtime directory can also contain a configuration file called `run_configuration.json` to provide details about the MinION run being performed. An example of this file looks like this:


Here's the example of (most of) the Ebola example `run_configuration.json`:

```json
{
  "title": "EBOV Validation Run",
  "basecalledPath": "fastq/pass",
  "samples": [
    {
      "name": "Mayinga",
      "description": "",
      "barcodes": [ "BC01" ]
    },
    {
      "name": "Kikwit",
      "description": "",
      "barcodes": [ "BC03" ]
    },
    {
      "name": "Makona",
      "description": "",
      "barcodes": [ "BC04" ]
    },
    {
      "name": "Negative Control",
      "description": "",
      "barcodes": [ "BC02" ]
    }
  ]
}
```

This file can specify the basecalled read path (as an alternative to the command line `--basecalledPath`), a title for the run and also a list of samples, their names and the barcodes that are being used to distinguish them.
If barcodes are specified in this way then only these barcodes will be used and visualized in RAMPART.
These options can also be specified on the command line (`--title`, `--basecalledPath`, `--annotatedPath` & `--barcodeNames`) and will override the options in the JSON file. However the `run_configuration.json` is useful as a way of recording the samples and barcodes used in a run and to help if the run needs to be restarted.




RAMPART is best run from with a directory created specifically for the particular run. By default a sub-directory called `annotations` will be created in the runtime directory contain the data files generated by the processing pipeline. These will be in the format of comma-seperated-value (CSV) files with one for each FASTQ file created by the basecaller (they will have the same filename as the FASTQ files but with the extension `.csv` instead of `.fastq`. 

The runtime directory can also contain a configuration file called `run_configuration.json` to provide details about the MinION run being performed. An example of this file looks like this:



This file can specify the basecalled read path (as an alternative to the command line `--basecalledPath`), a title for the run and also a list of samples, their names and the barcodes that are being used to distinguish them. If barcodes are specified in this way then only these barcodes will be used and visualized in RAMPART. These options can also be specified on the command line (`--title`, '--basecalledPath`, --`annotatedPath` & `--barcodeNames`) and will override the options in the JSON file. However the `run_configuration.json` is useful as a way of recording the samples and barcodes used in a run and to help if the run needs to be restarted.




## Configuration files define a protocol.

To get richer, more informative real-time analysis a folder of configuration files called a `protocol` directory can be provided.
This is a directory of files with specified names and formats that tell RAMPART about what is being sequenced and allows it to visualize the sequencing more appropriately. 
It can also contain custom scripts to alter the behaviour or processing of the data.


Normally the protocol directory is virus-specific, not run-specific.

### Installing a Protocol

A protocol directory, a complete set of configuration files and, potentially, custom pipelines can be downloaded as a package. For example the standard [ARTIC Network](http://artic.network/) Ebola virus protocol for RAMPART is available from [GitHub](https://github.com/artic-network/artic-ebov/). It can be downloaded and installed as follows:

```
git clone https://github.com/artic-network/artic-ebov.git
``` 

Then to use this protocol, RAMPART should be run with the `--protocol` command line option:

```
node <rampart_directory>/rampart.js --protocol <protocols_directory>/artic-ebov/rampart
```



### Define your own protocol

You can also design your own custom protocol. [See here](protocols) for more information.



